<body>
<div class="dashboard">
    <div class="card" style="padding: 15px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <small style="color:#94a3b8; font-size:0.6rem;">WEIGHT</small>
            <div class="stat-val" style="color:white; font-size: 1.1rem;" id="currWeight">250.0</div>
        </div>
        <div style="text-align:center;">
            <small style="color:#94a3b8; font-size:0.6rem;">DAILY DEFICIT GOAL</small>
            <div class="stat-val" style="font-size: 1.1rem;">2200</div>
        </div>
        <div style="text-align:right;">
            <small style="color:#94a3b8; font-size:0.6rem;">HYDRATION (OZ)</small>
            <div class="stat-val" style="color:#38bdf8; font-size: 1.1rem;">125</div>
        </div>
    </div>

    <div class="card">
        <div class="tile-header">Session: <span id="rTitle">Loading...</span></div>
        <div class="timer-display" id="timer">60:00</div>
        <button class="btn" onclick="toggleTimer()" id="tBtn" style="margin-bottom: 20px;">Start Session</button>
        
        <div class="tile-header" style="border-color: var(--cali);">Task List</div>
        <ul id="checkList" class="checklist"></ul>
    </div>

    <div class="card">
        <div class="habit-grid">
            <div class="habit-box" id="hSupp" onclick="toggleHabit('hSupp', 50)">SUPPS</div>
            <div class="habit-box" id="hTRT" onclick="toggleHabit('hTRT', 0)">TRT PIN</div>
            <div class="habit-box" id="hWater" onclick="toggleHabit('hWater', 0)">HYDRATED</div>
        </div>
        <input type="number" id="cals" placeholder="Calories Eaten Today" oninput="runMath()">
        <button class="btn" onclick="saveWeight()" style="background:var(--cali); margin-top:10px;">Log Weight</button>
    </div>
</div>

<script>
    let tS = 3600, tR = false, tI;

    const routines = [
        {t: "Sun: Active Rest", e: ["45 Min Walk", "Stretch", "Prep Meals"]},
        {t: "Mon: Calisthenics", e: ["Pushups: 4x12", "Inverted Rows: 4x10", "Dips: 3x10", "Plank: 3x1min"]},
        {t: "Tue: Metcon", e: ["Shadow Box: 3m", "Air Squats: 4x25", "High Knees: 1m", "Burpees: 10"]},
        {t: "Wed: Core/Cardio", e: ["Dead Bugs: 4x12", "Bird-Dogs: 3x10", "Side Plank: 30s", "30m Walk"]},
        {t: "Thu: Calisthenics", e: ["Squats: 4x20", "Lunges: 3x12", "Wall Sit: 1min", "Calf Raises: 3x20"]},
        {t: "Fri: Metcon", e: ["Mtn Climbers: 45s", "Burpees: 10", "Jumping Jacks: 1m", "Plank Jacks: 45s"]},
        {t: "Sat: Active Rest", e: ["Mobility Flow", "30 Min Walk", "Foam Roll"]}
    ];

    function updateWorkout() {
        const day = new Date().getDay(); 
        document.getElementById('rTitle').innerText = routines[day].t;
        document.getElementById('checkList').innerHTML = routines[day].e.map(ex => 
            `<li><input type="checkbox"> <span>${ex}</span></li>`).join('');
    }

    function toggleTimer() {
        tR = !tR; 
        document.getElementById('tBtn').innerText = tR ? "Pause" : "Resume";
        if(tR) {
            tI = setInterval(() => { 
                tS--; 
                let m = Math.floor(tS/60), s = tS%60; 
                document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;
                if(tS <= 0) clearInterval(tI);
            }, 1000);
        } else clearInterval(tI);
    }

    function saveWeight() {
        const w = prompt("Current Weight:", "250");
        if(w) localStorage.setItem('p195_lastWeight', w);
        location.reload();
    }

    // Load Weight
    document.getElementById('currWeight').innerText = localStorage.getItem('p195_lastWeight') || "250.0";
    updateWorkout();
</script>
</body>
